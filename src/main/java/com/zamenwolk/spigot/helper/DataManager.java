package com.zamenwolk.spigot.helper;import java.io.*;/** * Created by Martin on 11/07/2017. */public abstract class DataManager<Data extends DataModel & Serializable>{	protected Data             data;	private File               dataFile;	private ObjectOutputStream out;		public DataManager(File dataFile) throws IOException, ClassNotFoundException	{		this.dataFile = dataFile;		data = (Data) new ObjectInputStream(new FileInputStream(dataFile)).readObject();		out = new ObjectOutputStream(new FileOutputStream(dataFile));                saveChanges();	}		public DataManager(Data data, File dataFile) throws IOException	{		this.dataFile = dataFile;		this.data = data;				dataFile.getParentFile().mkdirs();		dataFile.createNewFile();		out = new ObjectOutputStream(new FileOutputStream(dataFile));				saveChanges();	}		protected void saveChanges()	{		try		{			out.writeObject(data);		}		catch (IOException e)		{			e.printStackTrace();			System.exit(-1);		}	}        @Override    public boolean equals(Object o)    {        if (this == o) return true;        if (o == null || getClass() != o.getClass()) return false;                DataManager<?> that = (DataManager<?>) o;                if (data != null ? !data.equals(that.data) : that.data != null) return false;        if (dataFile != null ? !dataFile.equals(that.dataFile) : that.dataFile != null) return false;        return out != null ? out.equals(that.out) : that.out == null;    }        @Override    public int hashCode()    {        int result = data != null ? data.hashCode() : 0;        result = 31 * result + (dataFile != null ? dataFile.hashCode() : 0);        result = 31 * result + (out != null ? out.hashCode() : 0);        return result;    }}